
@using DbAccess
@inject IUserDb user
@inject NavigationManager NavigationManager


<form>
    <p>@error</p>
    <div class="form-group">
        <label for="InputEmail">Email address</label>
        <input type="email" class="form-control" id="InputEmail" aria-describedby="emailHelp" placeholder="Enter email" @bind=Email>
        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
    </div>
    <div class="form-group">
        <label for="InputPassword">Password</label>
        <input type="password" class="form-control" id="InputPassword" placeholder="Password" @bind=Password>
    </div>
    <div class="form-check">
        <input type="checkbox" class="form-check-input" id="Check">
        <label class="form-check-label" for="Check">Remember login info</label>
    </div>
    
</form>
<button class="btn btn-primary" @onclick=AttempLogin>Submit</button>

@code {

    private string Email;
    private string Password;
    private bool isValid;
    private string error;

    private void AttempLogin()
    {
        //NavigationManager.NavigateTo("/movie", true);
        if(!string.IsNullOrWhiteSpace(Email) && !string.IsNullOrWhiteSpace(Password))
        {
            isValid = user.getUserByName(Email);
            if(isValid)
            {
                error = "No error";
                //navigate to all movies
                //NavigationManager.NavigateTo("/movie", true);
            }
            else
            {
                error = "Invalid credentials";
            }
        }
        else
        {
            error = "There are one or more empty fields";
        }
    }
}
